<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Your Cart - BBETA</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>BBETA</h1>
    <p>Apka Apna Bada Beta 🛒</p>
    <a href="index.html" class="cart-link">⬅ Back to Shop</a>
  </header>

  <main>
    <h2>Your Cart</h2>
    <div id="cart-items"></div>
    <p id="cart-total"></p>
    <button id="place-order">✅ Place Order</button>
  </main>

  <script>
    function renderCart() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let cartItemsDiv = document.getElementById("cart-items");
      let total = 0;

      if (cart.length === 0) {
        cartItemsDiv.innerHTML = "<p>Your cart is empty!</p>";
        document.getElementById("cart-total").innerText = "";
        return;
      }

      cartItemsDiv.innerHTML = "";
      cart.forEach((item, index) => {
        total += item.price * item.qty;
        cartItemsDiv.innerHTML += `
          <p>${item.qty} x ${item.name} - ₹${item.price * item.qty}</p>
        `;
      });

      document.getElementById("cart-total").innerText = "Total: ₹" + total;
    }

    document.getElementById("place-order").addEventListener("click", function() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      if (cart.length === 0) {
        alert("Your cart is empty!");
        return;
      }

      let orderText = "🛒 New Order from BBETA:%0A";
      cart.forEach(item => {
        orderText += `${item.qty} x ${item.name} = ₹${item.price * item.qty}%0A`;
      });

      let total = cart.reduce((sum, item) => sum + (item.price * item.qty), 0);
      orderText += `%0ATotal: ₹${total}%0A📍 Location: Nalgonda, Telangana 508001`;

      // ✅ WhatsApp number (replace with your number)
      let phone = "917093242271";
      let whatsappURL = `https://wa.me/${phone}?text=${orderText}`;

      localStorage.removeItem("cart"); // Empty cart
      window.location.href = whatsappURL; // Open WhatsApp
      setTimeout(() => {
        window.location.href = "thankyou.html";
      }, 2000);
    });

    renderCart();
  </script>
</body>
</html>
